schema: '2.0'
stages:
  data_preparation:
    cmd: python src/amogel/pipeline/stage_data_preparation.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 4f7d0981eaea14a2e0040873e8336697
      size: 1879
    - path: src/amogel/pipeline/stage_data_preparation.py
      hash: md5
      md5: bfb545bbf4b434af78d00edddbf3a741
      size: 891
    outs:
    - path: artifacts/data_ingestion
      hash: md5
      md5: 3c483789dcf6b65cc011cb4ffe788e16.dir
      size: 10760967104
      nfiles: 61
  ppi_data_prepration:
    cmd: python src/amogel/pipeline/stage_ppi_preparation.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 4f7d0981eaea14a2e0040873e8336697
      size: 1879
    - path: src/amogel/pipeline/stage_ppi_preparation.py
      hash: md5
      md5: a1264c12174910b802531371ee6dd006
      size: 860
    outs:
    - path: artifacts/ppi_data
      hash: md5
      md5: d9ce4114b19f6effca9e45700580182e.dir
      size: 130385179
      nfiles: 4
  data_preprocessing:
    cmd: python src/amogel/pipeline/stage_data_preprocessing.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 69e05b97fdcb91c457786d7fd6c6bec4
      size: 2510
    - path: src/amogel/components/data_preprocessing.py
      hash: md5
      md5: ec2f0be10ec0a7ea0e81276599f4bfe4
      size: 18294
    - path: src/amogel/pipeline/stage_data_preprocessing.py
      hash: md5
      md5: 8b25b6001eec9252d5a97f0df8fd53f1
      size: 1914
    params:
      params.yaml:
        data_preprocessing:
          filtering:
            mRNA:
              variance: 0.1
              annova: 2000
            DNA:
              variance: 0.001
              annova: 2000
            miRNA:
              variance: 0
              annova: 502
          test_split: 0.3
          n_bins: 2
          min_rules: 1000
          fold_change: true
          discretize_level: 1
          random_state: 44
    outs:
    - path: artifacts/data_preprocessing
      hash: md5
      md5: fed58aa8c70ef0a401f712fcddd445fb.dir
      size: 33496809
      nfiles: 11
  model_training:
    cmd: python src/amogel/pipeline/stage_06_model_training.py
    deps:
    - path: src/amogel/components/model_training.py
      hash: md5
      md5: f7252ec51ef2bf122fb7d1bf7efb624d
      size: 2039
    - path: src/amogel/pipeline/stage_06_model_training.py
      hash: md5
      md5: 026abc1a0b4d3ec4a4adcb81566761e6
      size: 849
    params:
      params.yaml:
        model_training:
          dataset: unified
          model: GraphClassification
          hidden_units: 32
          learning_rate: 1e-05
          learning_epoch: 300
          drop_out: 0.1
  knowledge_graph:
    cmd: python src/amogel/pipeline/stage_knowledge_graph.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 4f7d0981eaea14a2e0040873e8336697
      size: 1879
    - path: src/amogel/components/knowledge_graph.py
      hash: md5
      md5: cd36e733f3fddb873ccbf4e3b42c8e8a
      size: 66415
    - path: src/amogel/pipeline/stage_knowledge_graph.py
      hash: md5
      md5: 920ab25491092ddd8b6c22d756bccaa8
      size: 3727
    params:
      params.yaml:
        knowledge_graph:
          ppi_combined_score: 300
          ppi: true
          kegg_go: true
          synthetic: true
          edge_threshold: 0.8
          discretized: true
        model_training.dataset: triplet_multigraph
    outs:
    - path: artifacts/knowledge_graph
      hash: md5
      md5: 74c6f6c133531751a99b41d5b48756c7.dir
      size: 37346386874
      nfiles: 15
  train_encoder:
    cmd: python src/amogel/pipeline/stage_06_train_encoder.py
    deps:
    - path: src/amogel/components/train_multi_embedding.py
      hash: md5
      md5: 0b3d05ee229feecc1fff9d7a7b643ee9
      size: 7936
    - path: src/amogel/pipeline/stage_06_train_encoder.py
      hash: md5
      md5: 038161585daede1100ce75a2e2dfeaf2
      size: 1335
    params:
      params.yaml:
        train_encoder:
          learning_rate: 0.001
          output_channel: 16
          learning_epoch: 300
          print_interval: 1
          model: GAE
    outs:
    - path: artifacts/train_encoder
      hash: md5
      md5: a033188ab02cbacdfd5abfe29306d7ea.dir
      size: 167882
      nfiles: 1
  biomarkers:
    cmd: python src/amogel/pipeline/stage_biomarkers.py
    deps:
    - path: src/amogel/pipeline/stage_biomarkers.py
      hash: md5
      md5: 8bb40bc7cd6c3d157b9f8b56d38a3ce3
      size: 6008
    outs:
    - path: artifacts/biomarkers
      hash: md5
      md5: 089c0607187dee69e573229930393948.dir
      size: 982526
      nfiles: 4
